!function(a){"use strict";a.factory("TourHelpers",["$templateCache","$compile",function(a,b){function c(a,b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)}function d(a,d){return function(){var e=angular.element(a);return c(d,function(){b(e)(d)}),e}}function e(b,c){var e=a.get(b);return e?d(e,c):null}var f={};return f.attachTemplate=function(a,b,c){var f;b.template&&(f=d(a.$eval(b.template),a)),b.templateUrl&&(f=e(b.templateUrl,a)),f&&(c.template=f)},f.attachEventHandlers=function(a,b,d,e){angular.forEach(e,function(e){b[e]&&(d[e]=function(){c(a,function(){a.$eval(b[e])})})})},f}]),a.controller("TourController",["$filter",function(a){function b(b){var c=a("orderBy")(b,"order");return angular.forEach(c,function(a,b){a.next=c[b+1]?b+1:-1,a.prev=b-1}),c}function c(){d&&(d._options.steps=[],d.addSteps(b(f)))}var d,e=this,f=[];e.addStep=function(a){~f.indexOf(a)||(f.push(a),c())},e.removeStep=function(a){~f.indexOf(a)&&(f.splice(f.indexOf(a),1),c())},e.getSteps=function(){return f},e.init=function(a){return a.steps=b(f),d=new Tour(a)}}]),a.directive("tour",["TourHelpers",function(a){return{restrict:"EA",scope:!0,controller:"TourController",link:function(b,c,d,e){var f={name:d.name||"tour",container:d.container||"body",keyboard:d.keyboard||!0,storage:d.storage?b.$eval(d.storage):window.localStorage,debug:d.debug||!1,redirect:d.redirect||!0,duration:d.duration||!1,basePath:d.basePath||"",placement:d.placement||"right",backdrop:d.backdrop||!1,orphan:d.orphan||!1},g="onStart onEnd afterGetState afterSetState afterRemoveState onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" ");a.attachEventHandlers(b,d,f,g),a.attachTemplate(b,d,f),b.$watchCollection(e.getSteps,function(a){b.stepCount=a.length}),d.tourOptions&&angular.extend(f,b.$eval(d.tourOptions)),b.tour=e.init(f)}}}]),a.directive("tourStep",["TourHelpers",function(a){return{restrict:"EA",scope:!0,require:"^tour",link:function(b,c,d,e){function f(){return d.skip?b.$eval(d.skip):!1}var g={element:c,order:d.order||0},h="onShow onShown onHide onHidden onNext onPrev onPause onResume".split(" ");d.path&&(g.path=d.path),d.animation&&(g.animation=d.animation),d.container&&(g.container=d.container),d.placement&&(g.placement=d.placement),d.backdrop&&(g.backdrop=d.backdrop),d.redirect&&(g.redirect=d.redirect),d.orphan&&(g.orphan=d.orphan),d.reflex&&(g.reflex=d.reflex),d.$observe("content",function(a){g.content=a}),d.$observe("title",function(a){g.content=a}),a.attachEventHandlers(b,d,g,h),a.attachTemplate(b,d,g),b.$watch(f,function(a){a?e.removeStep(g):e.addStep(g)}),d.options&&angular.extend(g,b.$eval(d.options)),e.addStep(g)}}}])}(angular.module("bm.bsTour",[]));